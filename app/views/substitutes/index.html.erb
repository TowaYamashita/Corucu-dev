<h1>
  <%= t('activerecord.models.substitutes') + "情報の一覧" %>
</h1>

<%= render 'search_form' %>

<div class="panel panel-success">
  <div class="panel-heading">
		検索結果
	</div>
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th><%= sort_link(@q, :changed_at, t('activerecord.attributes.substitute.changed_at'), default_order: :desc) %></th>
        <th><%= t('activerecord.attributes.substitute.period') %></th>
        <th><%= t('activerecord.attributes.subject.course') %></th>
        <th><%= t('activerecord.attributes.substitute.comment') %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @substitutes.each do |substitute| %>
        <tr>
          <td><%= substitute.changed_at %></td>
          <td><%= substitute.period %></td>
          <td><%= substitute.subject.course %></td>
          <td>
            <% if substitute.comment.empty? %>
              <%= "無" %>
            <% else %>
              <%= "有" %>
            <% end %>
          </td>
          <td><%= link_to 'Show', substitute, class: "btn btn-sm btn-info btn-block" %></td>
          <% if user_signed_in? && ( substitute.user_id == current_user.id || current_user.admin_user == true ) %>
            <td><%= link_to 'Edit', edit_substitute_path(substitute), class: "btn btn-sm btn-success btn-block" %></td>
            <td><%= link_to 'Destroy', substitute, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-danger btn-block" %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<% if user_signed_in? %>
  <%= link_to 'New Substitute', new_substitute_path, class: "btn btn-lg btn-success btn-block" %>
<% end %>
